# ğŸ—‚ Git Workflow Cheatsheet

---

## ğŸ”„ 1. Update Local Branch From GitHub

### Update `dev`
```bash
git checkout dev
git pull origin dev
```
> ğŸ‘‰ Switch to `dev` and update it from GitHub.

### Update `main`
```bash
git checkout main
git pull origin main
```
> ğŸ‘‰ Switch to `main` and update it from GitHub.

---

## ğŸ”€ 2. Merge Dev â†’ Main

### âœ… Normal Merge *(keep all commits)*
```bash
git checkout main
git merge dev
git push origin main
```
- âœ” Keeps all `dev` commit history in `main`
- âœ” Good for tracking changes

### âœ… Squash Merge *(one clean commit)*
```bash
git checkout main
git merge --squash dev
git commit -m "Feature: describe change"
git push origin main
```
- âœ” Combines all `dev` commits into **ONE** commit
- âœ” Cleaner `main` history

---

## ğŸ” 3. Reset Dev After Merge *(Start Fresh)*

> Use this after `dev` is merged to `main` and you want a clean `dev` branch.

```bash
git checkout dev
git fetch origin
git reset --hard origin/main
git push --force origin dev
```
- âœ” Makes `dev` exactly the same as `main`
- âœ” Clears old `dev` history
- âš ï¸ Use `--force` carefully â€” **only if working alone**

---

## ğŸ–¥ 4. Safe Deploy on VPS

> âš ï¸ Never use plain `git pull` on production.

```bash
git fetch origin
git reset --hard origin/dev     # for dev server
# or
git reset --hard origin/main    # for production
```
- âœ” Forces VPS to match GitHub exactly
- âœ” Prevents old files or conflicts

---

## ğŸ“¦ 5. Full Deploy Steps *(Example)*

```bash
git fetch origin
git reset --hard origin/main
git clean -fd

cd backend
npm ci
npx prisma generate
npm run build

pm2 restart yu-chann-prod --update-env
```
- âœ” Clean
- âœ” Predictable
- âœ” Production safe

---

## ğŸ§  Simple Mental Model

| Command | What it does |
|---|---|
| `pull` | Update branch from GitHub |
| `merge` | Combine branches |
| `squash` | Combine commits into one |
| `reset --hard` | Force branch to match another |
| VPS | Mirror of GitHub |
